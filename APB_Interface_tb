module APB_Interface_tb;

  // Testbench signals
  reg Pwrite, Penable;
  reg [2:0] Pselx;
  reg [31:0] Pwdata, Paddr;
  wire Pwriteout, Penableout;
  wire [2:0] Pselxout;
  wire [31:0] Pwdataout, Paddrout;
  wire [31:0] Prdata;

  // Instantiate the Unit Under Test (UUT)
  APB_Interface uut (
    .Pwrite(Pwrite),
    .Penable(Penable),
    .Pselx(Pselx),
    .Pwdata(Pwdata),
    .Paddr(Paddr),
    .Pwriteout(Pwriteout),
    .Penableout(Penableout),
    .Pselxout(Pselxout),
    .Pwdataout(Pwdataout),
    .Paddrout(Paddrout),
    .Prdata(Prdata)
  );

  // Testbench sequence
  initial begin
    // Initialize all inputs
    Pwrite = 0;
    Penable = 0;
    Pselx = 3'b000;
    Pwdata = 32'h0;
    Paddr = 32'h0;

    // Test 1: Write transaction with valid address and data
    #10;
    Pwrite = 1;               // Set for write operation
    Penable = 1;              // Enable the transaction
    Pselx = 3'b001;           // Select slave 1
    Paddr = 32'h8000_0001;    // Set address
    Pwdata = 32'h1234_5678;   // Write data
    #10;

    // Check the outputs for write operation
    $display("Write operation:");
    $display("Pwriteout: %b, Penableout: %b, Pselxout: %b, Paddrout: %h, Pwdataout: %h", 
             Pwriteout, Penableout, Pselxout, Paddrout, Pwdataout);

    // Test 2: Read transaction from a different address
    #10;
    Pwrite = 0;               // Set for read operation
    Pselx = 3'b010;           // Select slave 2
    Paddr = 32'h8000_0023;    // Set address
    Penable = 1;              // Enable the transaction
    #10;

    // Check the outputs for read operation
    $display("Read operation:");
    $display("Pwriteout: %b, Penableout: %b, Pselxout: %b, Paddrout: %h, Prdata: %h", 
             Pwriteout, Penableout, Pselxout, Paddrout, Prdata);

    // Test 3: Write operation with another address and different data
    #10;
    Pwrite = 1;               // Set for write operation
    Pselx = 3'b011;           // Select slave 3
    Paddr = 32'h9000_0004;    // Set new address
    Pwdata = 32'h8765_4321;   // Write different data
    Penable = 1;              // Enable the transaction
    #10;

    // Check the outputs for the second write operation
    $display("Second write operation:");
    $display("Pwriteout: %b, Penableout: %b, Pselxout: %b, Paddrout: %h, Pwdataout: %h", 
             Pwriteout, Penableout, Pselxout, Paddrout, Pwdataout);

    // Test 4: Read operation with invalid address
    #10;
    Pwrite = 0;               // Set for read operation
    Pselx = 3'b100;           // Select a different slave
    Paddr = 32'hFFFF_FFFF;    // Invalid address (out of range)
    Penable = 1;              // Enable the transaction
    #10;

    // Check the outputs for the invalid read operation
    $display("Invalid read operation:");
    $display("Pwriteout: %b, Penableout: %b, Pselxout: %b, Paddrout: %h, Prdata: %h", 
             Pwriteout, Penableout, Pselxout, Paddrout, Prdata);

    // End the simulation
    #10;
    $finish;
  end

endmodule

